<h2>Dishes</h2>

<div><%= link_to 'Register Dish', new_dish_path %></div>

<%= form_with(url: dishes_path, method: :get) do %>
  <%= label_tag :tag_id, "Filter by Tag" %>
  <%= select_tag :tag_id, options_from_collection_for_select(@tags, :id, :name, params[:tag_id]), 
                  include_blank: "All" %>

  <%= submit_tag "Filter" %>
<% end %>

<% if @dishes.any? %>
  <ul>    
    <% @dishes.each do |dish| %>
      <div class='container'>
        <div class='img'><%= image_tag dish.image %></div>
        <li>
          <%= link_to dish.name, dish_path(dish.id) %> (<%= dish.status.humanize %>)                    
        </li>
          <% dish.tags.each do |tag| %>
            <span>#<%= tag.name %></span>
          <% end %>

        <p><%= dish.description %></p>
        <p><%= dish.calories %> cal</p>
      </div>
    <% end %>    
  </ul>
<% else %>
  <p>There is no dishes registered</p>
<% end %>
